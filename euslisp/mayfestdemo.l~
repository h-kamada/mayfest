(setq des '(idle pr2 craft apps engineering lab fromlecture))
(setq selected_num 0)

(defun main()
  (while (ros::ok)
    (pr2_start_guide)
    (pr2_explain)
    ))

(defun pr2_start_guide()
  (ros::subscribe "/mayfest2014/click" std_msgs::UInt8 #'click_cb)
  ;;(speak-jp "案内を始めます")
  (while (eq selected_num 0)
    (ros::spin-once)
    (idle)
    )
  (format t "Start to explain: 0~A: ~A ~%" selected_num (nth selected_num des))
  )

(defun pr2_explain()
  (cond ((eq selected_num 1) (pr2))
        ((eq selected_num 2) (craft))
        ((eq selected_num 3) (apps))
        ((eq selected_num 4) (engineering))
        ((eq selected_num 5) (lab))
        ((eq selected_num 6) (fromlecture)))
  (format t "Explanation finished! Enjoy your stay.")
  (setq selected_num 0)
)

(defun click_cb(msg)
  (setq selected_num (send msg :data))
  (format t "received message: ~A~%" selected_num)
  )

(main)